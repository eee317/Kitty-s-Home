"use strict";(self["webpackChunkkitty_home"]=self["webpackChunkkitty_home"]||[]).push([[555],{882:function(e,t,a){a.d(t,{Z:function(){return b}});var l=a(6252),o=a(3577),n=a(9963);const s={"aria-label":"Page navigation example"},i={class:"pagination justify-content-center"},d=(0,l._)("span",{"aria-hidden":"true"},"«",-1),r=[d],c=["onClick"],p=(0,l._)("span",{"aria-hidden":"true"},"»",-1),m=[p];function u(e,t,a,d,p,u){return(0,l.wg)(),(0,l.iD)("nav",s,[(0,l._)("ul",i,[(0,l._)("li",{class:(0,o.C_)([{disabled:!a.pages.has_pre},"page-item"])},[(0,l._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,n.iM)((t=>e.$emit("getOrder",1)),["prevent"]))},r)],2),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.pages.total_pages,((e,t)=>((0,l.wg)(),(0,l.iD)("li",{class:(0,o.C_)([{active:a.pages.current_page===e},"page-item"]),key:t+"page"},[(0,l._)("a",{class:"page-link",href:"#",onClick:(0,n.iM)((t=>u.updatePage(e)),["prevent"])},(0,o.zw)(e),9,c)],2)))),128)),(0,l._)("li",{class:(0,o.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,l._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,n.iM)((t=>e.$emit("getOrder",a.pages.total_pages)),["prevent"]))},m)],2)])])}var h={props:["pages"],methods:{updatePage(e){this.$emit("get-order",e)}}},_=a(3744);const g=(0,_.Z)(h,[["render",u]]);var b=g},3555:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ce}});var l=a(6252),o=a(3577),n=a(9963);const s=e=>((0,l.dD)("data-v-d850743a"),e=e(),(0,l.Cn)(),e),i={class:"contianer"},d={class:"row justify-content-center"},r={class:"col-11"},c={class:"table text-center"},p=s((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",null,"名稱"),(0,l._)("th",null,"分類"),(0,l._)("th",null,"捐款額"),(0,l._)("th",null,"是否啟用"),(0,l._)("th",null,"編輯")])],-1))),m={class:"dropdown"},u=s((()=>(0,l._)("a",{class:"dropdown-toggle",href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,l._)("i",{class:"bi bi-gear-fill css-text"})],-1))),h={class:"dropdown-menu text-center","aria-labelledby":"dropdownMenuLink"},_=["onClick"],g=["onClick"];function b(e,t,a,s,b,f){const y=(0,l.up)("pagination"),D=(0,l.up)("delete-donate"),v=(0,l.up)("edit-modal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",i,[(0,l._)("div",d,[(0,l._)("div",r,[(0,l._)("button",{class:"btn btn-primary float-end mt-3",onClick:t[0]||(t[0]=e=>f.openModal("","new"))},"建立捐款物品"),(0,l._)("table",c,[p,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(b.products,((e,t)=>((0,l.wg)(),(0,l.iD)("tr",{key:t+"product"},[(0,l._)("td",null,(0,o.zw)(e.title),1),(0,l._)("td",null,(0,o.zw)(e.category),1),(0,l._)("td",null,(0,o.zw)(e.origin_price),1),(0,l._)("td",null,(0,o.zw)(e.is_enabled?"啟用":"不啟用"),1),(0,l._)("td",null,[(0,l._)("div",m,[u,(0,l._)("ul",h,[(0,l._)("li",null,[(0,l._)("a",{class:"dropdown-item text-primary",href:"#",onClick:(0,n.iM)((t=>f.openModal(e,"edit")),["prevent"])},"編輯",8,_)]),(0,l._)("li",null,[(0,l._)("a",{class:"dropdown-item text-primary",href:"#",onClick:(0,n.iM)((t=>f.openModal(e,"delete")),["prevent"])},"刪除",8,g)])])])])])))),128))])])])])]),(0,l.Wm)(y,{pages:b.paginationData,onGetOrder:f.getProducts},null,8,["pages","onGetOrder"]),(0,l.Wm)(D,{donate:b.tempProduct,onGetOrder:f.getProducts,ref:"deleteDonateModal"},null,8,["donate","onGetOrder"]),(0,l.Wm)(v,{donate:b.tempProduct,ref:"editModal",onGetOrder:f.getProducts,state:b.state},null,8,["donate","onGetOrder","state"])],64)}var f=a(882);const y=e=>((0,l.dD)("data-v-8638812e"),e=e(),(0,l.Cn)(),e),D={class:"modal fade",ref:"editModal",id:"editModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},v={class:"modal-dialog"},w={class:"modal-content"},k={class:"modal-header"},M={class:"modal-title",id:"exampleModalLabel"},x={key:0},U={key:1},C=y((()=>(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),$={class:"modal-body"},P={class:"row"},O={class:"col-sm-4"},V={class:"mb-3"},z=y((()=>(0,l._)("label",{for:"imageUrl",class:"form-label"},"輸入圖片網址",-1))),G=["src"],Z={key:0},H=["onUpdate:modelValue"],N=["src"],Y={key:1},j={class:"col-sm-8"},I={class:"mb-3"},J=y((()=>(0,l._)("label",{for:"title",class:"form-label"},"標題",-1))),L={class:"row"},S={class:"mb-3 col-md-6"},K=y((()=>(0,l._)("label",{for:"category",class:"form-label"},"分類",-1))),T={class:"mb-3 col-md-6"},W=y((()=>(0,l._)("label",{for:"price",class:"form-label"},"單位",-1))),q={class:"mb-3 col-md-6"},A=y((()=>(0,l._)("label",{for:"origin_price",class:"form-label"},"原價",-1))),B={class:"mb-3 col-md-6"},E=y((()=>(0,l._)("label",{for:"price",class:"form-label"},"售價",-1))),F=y((()=>(0,l._)("hr",null,null,-1))),Q={class:"mb-3"},R=y((()=>(0,l._)("label",{for:"description",class:"form-label"},"產品描述",-1))),X={class:"mb-3"},ee=y((()=>(0,l._)("label",{for:"content",class:"form-label"},"說明內容",-1))),te={class:"mb-3"},ae={class:"form-check"},le=y((()=>(0,l._)("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1))),oe={class:"modal-footer d-flex justify-content-between"},ne=y((()=>(0,l._)("button",{type:"button",class:"btn btn-secondary css-button","data-bs-dismiss":"modal"}," 取消 ",-1)));function se(e,t,a,s,i,d){return(0,l.wg)(),(0,l.iD)("div",D,[(0,l._)("div",v,[(0,l._)("div",w,[(0,l._)("div",k,[(0,l._)("h5",M,[a.state?((0,l.wg)(),(0,l.iD)("span",x,"新增")):((0,l.wg)(),(0,l.iD)("span",U,"編輯")),(0,l.Uk)(" "+(0,o.zw)(a.donate.title),1)]),C]),(0,l._)("div",$,[(0,l._)("div",P,[(0,l._)("div",O,[(0,l._)("div",V,[z,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>i.tempDonate.imageUrl=e),placeholder:"請輸入圖片連結"},null,512),[[n.nr,i.tempDonate.imageUrl]])]),(0,l._)("img",{class:"img-fluid",src:i.tempDonate.imageUrl,alt:""},null,8,G),Array.isArray(i.tempDonate.imagesUrl)?((0,l.wg)(),(0,l.iD)("div",Z,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.tempDonate.imagesUrl,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t+"img"},[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":e=>i.tempDonate.imagesUrl[t]=e},null,8,H),[[n.nr,i.tempDonate.imagesUrl[t]]]),(0,l._)("img",{class:"img-fluid",src:i.tempDonate.imagesUrl[t],alt:""},null,8,N)],64)))),128)),!i.tempDonate.imagesUrl.length||i.tempDonate.imagesUrl[i.tempDonate.imagesUrl.length-1]?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:t[1]||(t[1]=e=>i.tempDonate.imagesUrl.push("")),class:"btn btn-outline-primary btn-sm d-block w-100"}," 新增圖片 ")):(0,l.kq)("",!0),i.tempDonate.imagesUrl.length?((0,l.wg)(),(0,l.iD)("button",{key:1,onClick:t[2]||(t[2]=e=>i.tempDonate.imagesUrl.pop("")),class:"btn btn-outline-danger btn-sm d-block w-100"}," 刪除圖片 ")):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.iD)("div",Y,[(0,l._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[3]||(t[3]=(...t)=>e.creatImg&&e.creatImg(...t))}," 新增圖片 ")]))]),(0,l._)("div",j,[(0,l._)("div",I,[J,(0,l.wy)((0,l._)("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":t[4]||(t[4]=e=>i.tempDonate.title=e)},null,512),[[n.nr,i.tempDonate.title]])]),(0,l._)("div",L,[(0,l._)("div",S,[K,(0,l.wy)((0,l._)("input",{id:"category",type:"text",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>i.tempDonate.category=e),placeholder:"請輸入分類"},null,512),[[n.nr,i.tempDonate.category]])]),(0,l._)("div",T,[W,(0,l.wy)((0,l._)("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":t[6]||(t[6]=e=>i.tempDonate.unit=e)},null,512),[[n.nr,i.tempDonate.unit]])]),(0,l._)("div",q,[A,(0,l.wy)((0,l._)("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":t[7]||(t[7]=e=>i.tempDonate.origin_price=e)},null,512),[[n.nr,i.tempDonate.origin_price]])]),(0,l._)("div",B,[E,(0,l.wy)((0,l._)("input",{id:"price",type:"number",min:"0",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>i.tempDonate.price=e),placeholder:"請輸入售價"},null,512),[[n.nr,i.tempDonate.price]])])])]),F,(0,l._)("div",Q,[R,(0,l.wy)((0,l._)("textarea",{id:"description",type:"text",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>i.tempDonate.description=e),placeholder:"請輸入產品描述"},"\n              ",512),[[n.nr,i.tempDonate.description]])]),(0,l._)("div",X,[ee,(0,l.wy)((0,l._)("textarea",{id:"description",type:"text",class:"form-control","onUpdate:modelValue":t[10]||(t[10]=e=>i.tempDonate.content=e),placeholder:"請輸入說明內容"},"\n              ",512),[[n.nr,i.tempDonate.content]])]),(0,l._)("div",te,[(0,l._)("div",ae,[(0,l.wy)((0,l._)("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[11]||(t[11]=e=>i.tempDonate.is_enabled=e)},null,512),[[n.e8,i.tempDonate.is_enabled]]),le])])])]),(0,l._)("div",oe,[ne,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>d.updateDonate&&d.updateDonate(...e))},"上傳")])])])],512)}var ie=a(7424),de=a.n(ie),re={props:{donate:{},state:{type:Boolean,default:!1}},data(){return{tempDonate:{imagesUrl:[]}}},methods:{openModal(){this.editModal.show(),console.log(this.state)},hideModal(){this.editModal.hide()},updateDonate(){let e="https://vue3-course-api.hexschool.io/v2/api/peiying/admin/product",t="post";console.log(this.tempDonate),!1===this.state&&(e=`https://vue3-course-api.hexschool.io/v2/api/peiying/admin/product/${this.tempDonate.id}`,t="put"),this.$http[t](e,{data:this.tempDonate}).then((e=>{this.hideModal(),this.$emit("get-order"),console.log(this.state)})).catch((e=>{console.dir(e)}))}},watch:{donate(){this.tempDonate=JSON.parse(JSON.stringify(this.donate))}},mounted(){this.editModal=new(de())(this.$refs.editModal,{keyboard:!1,backdrop:!1})}},ce=a(3744);const pe=(0,ce.Z)(re,[["render",se],["__scopeId","data-v-8638812e"]]);var me=pe;const ue={class:"modal fade",tabindex:"-1",ref:"deleteDonateModal",id:"deleteDonateModal"},he={class:"modal-dialog"},_e={class:"modal-content"},ge=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title"},"確定要刪除？"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),be={class:"modal-body text-center"},fe={class:"mt-3"},ye={class:"d-flex justify-content-between m-4"},De=(0,l._)("button",{type:"button",class:"btn btn-secondary float-start text-white","data-bs-dismiss":"modal"},"取消",-1);function ve(e,t,a,n,s,i){return(0,l.wg)(),(0,l.iD)("div",ue,[(0,l._)("div",he,[(0,l._)("div",_e,[ge,(0,l._)("div",be,[(0,l._)("p",fe,"刪除「 "+(0,o.zw)(a.donate.title)+" 」捐款資料",1)]),(0,l._)("div",ye,[De,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>i.deleteThisDonate&&i.deleteThisDonate(...e))},"確定")])])])],512)}var we={props:{donate:{}},methods:{openModal(){this.modal.show(),console.log(this.donate)},hideModal(){this.modal.hide()},deleteThisDonate(){const e=`https://vue3-course-api.hexschool.io/v2/api/peiying/admin/product/${this.donate.id}`;this.$http.delete(e).then((e=>{this.$emit("get-order"),this.hideModal()})).catch((e=>{console.dir(e)}))}},mounted(){this.modal=new(de())(this.$refs.deleteDonateModal,{keyboard:!0,backdrop:!1})}};const ke=(0,ce.Z)(we,[["render",ve]]);var Me=ke,xe={components:{pagination:f.Z,deleteDonate:Me,editModal:me},data(){return{paginationData:{},products:{},tempProduct:{},state:!0}},methods:{getProducts(e=1){const t=`https://vue3-course-api.hexschool.io/v2/api/peiying/admin/products?page=${e}`;this.$http.get(t).then((e=>{console.log(e),this.products=e.data.products,this.paginationData=e.data.pagination})).catch((e=>{console.log(e)}))},openModal(e,t){if("delete"===t){this.tempProduct={...e};const t=this.$refs.deleteDonateModal;t.openModal()}else if("edit"===t){this.tempProduct=JSON.parse(JSON.stringify(e));const t=this.$refs.editModal;this.state=!1,t.openModal()}else if("new"===t){this.tempProduct={},this.state=!0;const e=this.$refs.editModal;e.openModal()}}},mounted(){this.getProducts()}};const Ue=(0,ce.Z)(xe,[["render",b],["__scopeId","data-v-d850743a"]]);var Ce=Ue}}]);
//# sourceMappingURL=555.3e34a266.js.map