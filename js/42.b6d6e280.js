"use strict";(self["webpackChunkkitty_home"]=self["webpackChunkkitty_home"]||[]).push([[42],{1530:function(t,e,l){function a(t){return{all:t=t||new Map,on:function(e,l){var a=t.get(e);a?a.push(l):t.set(e,[l])},off:function(e,l){var a=t.get(e);a&&(l?a.splice(a.indexOf(l)>>>0,1):t.set(e,[]))},emit:function(e,l){var a=t.get(e);a&&a.slice().map((function(t){t(l)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,l)}))}}}l.d(e,{Z:function(){return n}});const o=a();var n=o},4344:function(t,e,l){l.d(e,{Z:function(){return b}});var a=l(6252);const o={class:"modal fade",tabindex:"-1",ref:"deleteAllModal",id:"deleteAllModal"},n={class:"modal-dialog"},i={class:"modal-content"},s={class:"modal-body"},d=(0,a._)("div",{class:"text-center p-4"},[(0,a._)("h5",{class:"text-primary"}," 確定要刪除全部？ ")],-1),r={class:"d-flex justify-content-between mt-4"};function c(t,e,l,c,u,h){return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",n,[(0,a._)("div",i,[(0,a._)("div",s,[d,(0,a._)("div",r,[(0,a._)("button",{type:"button",class:"btn btn-secondary text-white","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=(...t)=>h.hideModal&&h.hideModal(...t))},"取消"),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>h.isWhere&&h.isWhere(...t))},"確定")])])])])],512)}var u=l(1530),h=l(7424),p=l.n(h),m={props:{environment:{}},data(){return{url:""}},methods:{isWhere(){"cart"===this.environment?this.url="https://vue3-course-api.hexschool.io/v2/api/peiying/carts":this.url="https://vue3-course-api.hexschool.io/v2/api/peiying/admin/orders/all",this.deleteCartAll()},deleteCartAll(){this.$http.delete(this.url).then((t=>{"cart"===this.environment?(this.$emit("get-cart"),u.Z.emit("render-cart")):this.$emit("get-order"),this.hideModal()})).catch((t=>{console.log(t)}))},openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(p())(this.$refs.deleteAllModal,{keyboard:!1,backdrop:!1})}},f=l(3744);const _=(0,f.Z)(m,[["render",c]]);var b=_},7042:function(t,e,l){l.r(e),l.d(e,{default:function(){return F}});var a=l(6252),o=l(3577),n=l(9963),i=l(5906);const s=t=>((0,a.dD)("data-v-5d1f2900"),t=t(),(0,a.Cn)(),t),d={key:0,class:"animated fadeIn"},r=s((()=>(0,a._)("div",{class:"p-3 p-md-5 d-flex justify-content-center align-items-center flex-column text-center lh-lg"},[(0,a._)("h2",{class:"text-secondary"},"尚未加入捐款款項"),(0,a._)("p",{class:"text-secondary"},"加入捐款款項，才能完成後續的捐款動作唷！")],-1))),c=s((()=>(0,a._)("img",{class:"img-fluid",src:i,alt:""},null,-1))),u=(0,a.Uk)("查看捐款款項"),h={key:1,class:"my-4"},p={class:"table mb-5"},m=s((()=>(0,a._)("thead",{class:"fs-5 text-primary"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"}),(0,a._)("th",{scope:"col"},"捐款品項"),(0,a._)("th",{scope:"col"},"數量"),(0,a._)("th",{scope:"col"},"單價"),(0,a._)("th",{scope:"col"},"金額")])],-1))),f={scope:"row"},_=["onClick"],b={href:"#"},g=["onClick"],v={class:"d-inline p-3 text-primary"},y={href:"#"},C=["onClick"],k={class:"fs-5 text-success"},x=s((()=>(0,a._)("td",null,null,-1))),M=s((()=>(0,a._)("td",null,null,-1))),w=s((()=>(0,a._)("td",null,null,-1))),D=s((()=>(0,a._)("td",null,"捐款總額",-1))),I=(0,a.Uk)("返回捐款款項"),$=(0,a.Uk)("下一步");function A(t,e,l,i,s,A){const Z=(0,a.up)("router-link"),W=(0,a.up)("deleteCartItemModal"),z=(0,a.up)("deleteCaerAllModal"),L=(0,a.up)("loadingPage");return(0,a.wg)(),(0,a.iD)(a.HY,null,[0===s.cartData?.carts?.length?((0,a.wg)(),(0,a.iD)("div",d,[r,c,(0,a.Wm)(Z,{type:"button",class:"btn btn-primary mt-1 d-flex justify-content-center align-items-center flex-column text-center lh-lg",to:"/donate"},{default:(0,a.w5)((()=>[u])),_:1})])):((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("button",{type:"button",class:"btn btn-outline-secondary css-button my-3 float-end",onClick:e[0]||(e[0]=(...t)=>A.deleteCartAll&&A.deleteCartAll(...t))},"刪除全部"),(0,a._)("table",p,[m,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.cartData.carts,(t=>((0,a.wg)(),(0,a.iD)("tbody",{key:t.product.id},[(0,a._)("tr",null,[(0,a._)("th",f,[(0,a._)("i",{class:"bi bi-trash3-fill",onClick:e=>A.deleteCartItem(t.id,t.product.title),style:{cursor:"pointer"}},null,8,_)]),(0,a._)("td",null,(0,o.zw)(t.product.title),1),(0,a._)("td",null,[(0,a._)("a",b,[(0,a._)("span",{class:"bi bi-dash",onClick:(0,n.iM)((e=>A.editCartItem(t,"reduceOne",t.qty)),["prevent"])},null,8,g)]),(0,a._)("div",v,(0,o.zw)(t.qty),1),(0,a._)("a",y,[(0,a._)("span",{class:"bi bi-plus-lg",onClick:(0,n.iM)((e=>A.editCartItem(t,"addOne",t.qty)),["prevent"])},null,8,C)])]),(0,a._)("td",null,(0,o.zw)(t.product.price),1),(0,a._)("td",null,(0,o.zw)(t.total),1)])])))),128)),(0,a._)("tfoot",k,[(0,a._)("tr",null,[x,M,w,D,(0,a._)("td",null,(0,o.zw)(s.cartData.total),1)])])]),(0,a.Wm)(W,{item:s.productTitle,ref:"deleteCartItemModal",onGetCart:A.getCart},null,8,["item","onGetCart"]),(0,a.Wm)(z,{environment:"cart",ref:"deleteCartAllModal",onGetCart:A.getCart},null,8,["onGetCart"]),(0,a.Wm)(Z,{type:"button",class:"btn btn-primary",to:"/donate"},{default:(0,a.w5)((()=>[I])),_:1}),(0,a.Wm)(Z,{class:(0,o.C_)([{disabled:0===s.cartData?.carts?.length},"btn btn-primary float-end"]),type:"button",to:"/cart/form",onClick:e[1]||(e[1]=t=>A.clickNext("form"))},{default:(0,a.w5)((()=>[$])),_:1},8,["class"])])),(0,a.Wm)(L,{isLoading:s.isLoading},null,8,["isLoading"])],64)}var Z=l(1530);const W={class:"modal fade",tabindex:"-1",ref:"deleteModal",id:"deleteCartItemModal"},z={class:"modal-dialog"},L={class:"modal-content"},q=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title"},"已刪除"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),G={class:"modal-body"},O={class:"text-center"},T={class:"modal-footer"};function j(t,e,l,n,i,s){return(0,a.wg)(),(0,a.iD)("div",W,[(0,a._)("div",z,[(0,a._)("div",L,[q,(0,a._)("div",G,[(0,a._)("div",O,(0,o.zw)(l.item),1)]),(0,a._)("div",T,[(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>s.hideModal&&s.hideModal(...t))},"我知道了")])])])],512)}var N=l(7424),U=l.n(N),Y={props:{item:{}},methods:{openModal(){this.modal.show()},hideModal(){this.$emit("get-cart"),this.modal.hide()}},mounted(){this.modal=new(U())(this.$refs.deleteModal,{keyboard:!0,backdrop:!1})}},H=l(3744);const J=(0,H.Z)(Y,[["render",j]]);var K=J,P=l(4344),B={components:{deleteCartItemModal:K,deleteCaerAllModal:P.Z},data(){return{cartData:[],productTitle:null,isLoading:!0}},mounted(){this.getCart()},methods:{getCart(){const t="https://vue3-course-api.hexschool.io/v2/api/peiying/cart";this.$http.get(t).then((t=>{this.isLoading=!0,this.cartData=t.data.data,setTimeout((()=>{this.isLoading=!1}),400)})).catch((t=>{console.log(t)}))},editCartItem(t,e,l){const a=l;let o={};if("reduceOne"===e){if(1===a)return this.deleteCartItem(t.id,t.product.title);o=a-1}else o=a+1;const n={product_id:t.id,qty:o},i=`https://vue3-course-api.hexschool.io/v2/api/peiying/cart/${t.id}`;this.$http.put(i,{data:n}).then((t=>{this.getCart(),Z.Z.emit("render-cart")})).catch((t=>{console.log(t)}))},deleteCartItem(t,e){const l=`https://vue3-course-api.hexschool.io/v2/api/peiying/cart/${t}`;this.$http.delete(l).then((t=>{this.productTitle=e,Z.Z.emit("render-cart");const l=this.$refs.deleteCartItemModal;l.openModal()})).catch((t=>{console.log(t)}))},deleteCartAll(){const t=this.$refs.deleteCartAllModal;t.openModal()},clickNext(t){Z.Z.emit("clickNext",t)}}};const E=(0,H.Z)(B,[["render",A],["__scopeId","data-v-5d1f2900"]]);var F=E},5906:function(t,e,l){t.exports=l.p+"img/notYetJoinedDonate.5baa4d22.svg"}}]);
//# sourceMappingURL=42.b6d6e280.js.map