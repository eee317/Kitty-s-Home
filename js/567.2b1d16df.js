"use strict";(self["webpackChunkkitty_home"]=self["webpackChunkkitty_home"]||[]).push([[567],{1530:function(e,t,l){function a(e){return{all:e=e||new Map,on:function(t,l){var a=e.get(t);a?a.push(l):e.set(t,[l])},off:function(t,l){var a=e.get(t);a&&(l?a.splice(a.indexOf(l)>>>0,1):e.set(t,[]))},emit:function(t,l){var a=e.get(t);a&&a.slice().map((function(e){e(l)})),(a=e.get("*"))&&a.slice().map((function(e){e(t,l)}))}}}l.d(t,{Z:function(){return o}});const d=a();var o=d},882:function(e,t,l){l.d(t,{Z:function(){return g}});var a=l(6252),d=l(3577),o=l(9963);const r={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center"},s=(0,a._)("span",{"aria-hidden":"true"},"«",-1),i=[s],c=["onClick"],u=(0,a._)("span",{"aria-hidden":"true"},"»",-1),m=[u];function p(e,t,l,s,u,p){return(0,a.wg)(),(0,a.iD)("nav",r,[(0,a._)("ul",n,[(0,a._)("li",{class:(0,d.C_)([{disabled:!l.pages.has_pre},"page-item"])},[(0,a._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,o.iM)((t=>e.$emit("getOrder",1)),["prevent"]))},i)],2),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.pages.total_pages,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{class:(0,d.C_)([{active:l.pages.current_page===e},"page-item"]),key:t+"page"},[(0,a._)("a",{class:"page-link",href:"#",onClick:(0,o.iM)((t=>p.updatePage(e)),["prevent"])},(0,d.zw)(e),9,c)],2)))),128)),(0,a._)("li",{class:(0,d.C_)(["page-item",{disabled:!l.pages.has_next}])},[(0,a._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,o.iM)((t=>e.$emit("getOrder",l.pages.total_pages)),["prevent"]))},m)],2)])])}var h={props:["pages"],methods:{updatePage(e){this.$emit("get-order",e)}}},_=l(3744);const b=(0,_.Z)(h,[["render",p]]);var g=b},4344:function(e,t,l){l.d(t,{Z:function(){return g}});var a=l(6252);const d={class:"modal fade",tabindex:"-1",ref:"deleteAllModal",id:"deleteAllModal"},o={class:"modal-dialog"},r={class:"modal-content"},n={class:"modal-body"},s=(0,a._)("div",{class:"text-center p-4"},[(0,a._)("h5",{class:"text-primary"}," 確定要刪除全部？ ")],-1),i={class:"d-flex justify-content-between mt-4"};function c(e,t,l,c,u,m){return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",o,[(0,a._)("div",r,[(0,a._)("div",n,[s,(0,a._)("div",i,[(0,a._)("button",{type:"button",class:"btn btn-secondary text-white","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=(...e)=>m.hideModal&&m.hideModal(...e))},"取消"),(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>m.isWhere&&m.isWhere(...e))},"確定")])])])])],512)}var u=l(1530),m=l(7424),p=l.n(m),h={props:{environment:{}},data(){return{url:""}},methods:{isWhere(){"cart"===this.environment?this.url="https://vue3-course-api.hexschool.io/v2/api/peiying/carts":this.url="https://vue3-course-api.hexschool.io/v2/api/peiying/admin/orders/all",this.deleteCartAll()},deleteCartAll(){this.$http.delete(this.url).then((e=>{"cart"===this.environment?(this.$emit("get-cart"),u.Z.emit("render-cart")):this.$emit("get-order"),this.hideModal()})).catch((e=>{console.log(e)}))},openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(p())(this.$refs.deleteAllModal,{keyboard:!1,backdrop:!1})}},_=l(3744);const b=(0,_.Z)(h,[["render",c]]);var g=b},3567:function(e,t,l){l.r(t),l.d(t,{default:function(){return ze}});var a=l(6252),d=l(3577),o=l(9963),r=l(26);const n=e=>((0,a.dD)("data-v-922f529e"),e=e(),(0,a.Cn)(),e),s={class:"row justify-content-center"},i={key:0,class:"col-10"},c=n((()=>(0,a._)("div",{class:"p-3 p-md-5 d-flex justify-content-center align-items-center flex-column text-center lh-lg"},[(0,a._)("h2",{class:"text-secondary"},"目前沒有收款項目")],-1))),u=n((()=>(0,a._)("img",{width:"400",class:"img-fluid",src:r,alt:"目前沒有收款項目",style:{display:"block",margin:"auto"}},null,-1))),m=[c,u],p={key:1,class:"col-11"},h={class:"table mt-4 text-center table-hover"},_=n((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"捐款建立時間"),(0,a._)("th",null,"Email"),(0,a._)("th",null," 捐款方式 "),(0,a._)("th",null,"捐款金額"),(0,a._)("th",null,"是否已捐款"),(0,a._)("th")])],-1))),b=n((()=>(0,a._)("br",null,null,-1))),g={class:"css-text"},f={class:"css-text"},v={class:"css-text"},y={class:"css-text"},w={class:"dropdown"},M=n((()=>(0,a._)("a",{class:"dropdown-toggle",href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,a._)("i",{class:"bi bi-gear-fill css-text"})],-1))),k={class:"dropdown-menu text-center","aria-labelledby":"dropdownMenuLink"},x=["onClick"],O=["onClick"];function C(e,t,l,r,n,c){const u=(0,a.up)("pagination-page"),C=(0,a.up)("delete-all-modal"),D=(0,a.up)("delete-order-modal"),$=(0,a.up)("order-modal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",s,[0===n.orders.length?((0,a.wg)(),(0,a.iD)("div",i,m)):((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("button",{type:"button",class:"btn btn-outline-secondary css-button mt-5 float-end",onClick:t[0]||(t[0]=(...e)=>c.deleteAllModal&&c.deleteAllModal(...e))},"刪除全部"),(0,a._)("table",h,[_,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.orders,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t+"order"},[(0,a._)("td",null,[(0,a.Uk)((0,d.zw)(c.creatDate(e.create_at)),1),b,(0,a.Uk)((0,d.zw)(c.creatTime(e.create_at)),1)]),(0,a._)("td",g,(0,d.zw)(e.user.email),1),(0,a._)("td",f,(0,d.zw)(e.user.method),1),(0,a._)("td",v,(0,d.zw)(e.total),1),(0,a._)("td",y,(0,d.zw)(e.is_paid?"是":"否"),1),(0,a._)("td",null,[(0,a._)("div",w,[M,(0,a._)("ul",k,[(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item text-primary",href:"#",onClick:(0,o.iM)((t=>c.openModal(e,"edit")),["prevent"])},"檢視",8,x)]),(0,a._)("li",null,[(0,a._)("a",{class:"dropdown-item text-primary",href:"#",onClick:(0,o.iM)((t=>c.openModal(e,"delete")),["prevent"])},"刪除",8,O)])])])])])))),128))])]),(0,a.Wm)(u,{pages:n.pagination,onGetOrder:c.getOrder},null,8,["pages","onGetOrder"])]))]),(0,a.Wm)(C,{environment:"order",onGetOrder:c.getOrder,ref:"deleteOrderAllModal"},null,8,["onGetOrder"]),(0,a.Wm)(D,{order:n.tempOrder,onGetOrder:c.getOrder,ref:"deleteItOrderModal"},null,8,["order","onGetOrder"]),(0,a.Wm)($,{order:n.tempOrder,ref:"orderModal"},null,8,["order"])],64)}var D=l(4344),$=l(882);const z={class:"modal fade",tabindex:"-1",ref:"deleteOrderModal",id:"deleteOrderModal"},Z={class:"modal-dialog"},A={class:"modal-content"},W=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title"},"確定要刪除？"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),H={class:"modal-body text-center"},Y={class:"mt-3"},G={class:"d-flex justify-content-between m-4"},L=(0,a._)("button",{type:"button",class:"btn btn-secondary float-start text-white","data-bs-dismiss":"modal"},"取消",-1);function P(e,t,l,o,r,n){const s=(0,a.up)("deleteConfirmModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",z,[(0,a._)("div",Z,[(0,a._)("div",A,[W,(0,a._)("div",H,[(0,a._)("p",Y,"刪除「 "+(0,d.zw)(l.order?.user?.email)+" 」捐款資料",1)]),(0,a._)("div",G,[L,(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>n.deleteThisOrder&&n.deleteThisOrder(...e))},"確定")])])])],512),(0,a.Wm)(s,{order:l.order,ref:"delConfirmModal"},null,8,["order"])],64)}var j=l(7424),I=l.n(j);const T={ref:"confirmModal",class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},K={class:"modal-dialog"},q={class:"modal-content"},N=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title",id:"exampleModalLabel"},"刪除成功"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),U={class:"modal-body"},E={class:"modal-footer"};function F(e,t,l,o,r,n){return(0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("div",K,[(0,a._)("div",q,[N,(0,a._)("div",U," 已刪除 "+(0,d.zw)(l.order?.user?.email)+" 的捐款資料 ",1),(0,a._)("div",E,[(0,a._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=(...e)=>n.hideModal&&n.hideModal(...e))},"我知道了")])])])],512)}var S={props:{order:{}},methods:{openModal(){this.modal.show()},hideModal(){this.modal.hide()}},mounted(){this.modal=new(I())(this.$refs.confirmModal,{keyboard:!0,backdrop:!1})}},B=l(3744);const J=(0,B.Z)(S,[["render",F]]);var Q=J,R={components:{deleteConfirmModal:Q},props:{order:{}},methods:{openModal(){this.modal.show()},hideModal(){this.modal.hide()},deleteThisOrder(){const e=`https://vue3-course-api.hexschool.io/v2/api/peiying/admin/order/${this.order.id}`;this.$http.delete(e).then((e=>{this.$emit("get-order"),this.hideModal();const t=this.$refs.delConfirmModal;t.openModal()})).catch((e=>{console.dir(e)}))}},mounted(){this.modal=new(I())(this.$refs.deleteOrderModal,{keyboard:!0,backdrop:!1})}};const V=(0,B.Z)(R,[["render",P]]);var X=V;const ee={ref:"orderModal",class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},te={class:"modal-dialog"},le={class:"modal-content"},ae={class:"modal-header"},de={class:"modal-title text-primary",id:"exampleModalLabel"},oe=(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),re={class:"modal-body"},ne=(0,a._)("h5",{class:"text-secondary my-4 ms-2"},"捐款內容",-1),se={class:"table"},ie=(0,a._)("thead",null,null,-1),ce={class:"text-secondary mb-3 me-4 float-end"},ue={class:"table"},me=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},[(0,a._)("h5",null,"捐款者資料")]),(0,a._)("th")])],-1),pe=(0,a._)("td",null,"信箱",-1),he=(0,a._)("td",null,"捐款身份",-1),_e=(0,a._)("td",null,"捐款者手機",-1),be=(0,a._)("td",null,"捐款者姓名",-1),ge=(0,a._)("td",null,"地址",-1),fe={key:0},ve=(0,a._)("td",null,"公司名稱與統編",-1),ye={key:1},we=(0,a._)("td",null,"公司電話",-1),Me=(0,a._)("div",{class:"modal-footer"},[(0,a._)("button",{type:"button",class:"btn btn-primary"},"關閉")],-1);function ke(e,t,l,o,r,n){return(0,a.wg)(),(0,a.iD)("div",ee,[(0,a._)("div",te,[(0,a._)("div",le,[(0,a._)("div",ae,[(0,a._)("h5",de,(0,d.zw)(l.order?.user?.email),1),oe]),(0,a._)("div",re,[ne,(0,a._)("table",se,[ie,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.order.products,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t+"products"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e,((e,t)=>((0,a.wg)(),(0,a.iD)("td",{key:t+"product"},(0,d.zw)(e.title),1)))),128)),(0,a._)("td",null,(0,d.zw)(e.qty)+"件",1),(0,a._)("th",null,"＄"+(0,d.zw)(e.total)+"元",1)])))),128))])]),(0,a._)("h6",ce,"共捐款 "+(0,d.zw)(l.order.total)+" 元",1),(0,a._)("table",ue,[me,(0,a._)("tbody",null,[(0,a._)("tr",null,[pe,(0,a._)("td",null,(0,d.zw)(l.order?.user?.email),1)]),(0,a._)("tr",null,[he,(0,a._)("td",null,(0,d.zw)(l.order?.user?.companyID?"公司行號":"個人"),1)]),(0,a._)("tr",null,[_e,(0,a._)("td",null,(0,d.zw)(l.order?.user?.tel),1)]),(0,a._)("tr",null,[be,(0,a._)("td",null,(0,d.zw)(l.order?.user?.name),1)]),(0,a._)("tr",null,[ge,(0,a._)("td",null,(0,d.zw)(l.order?.user?.address),1)]),"company"===l.order?.user?.identity?((0,a.wg)(),(0,a.iD)("tr",fe,[ve,(0,a._)("td",null,(0,d.zw)(l.order?.user?.companyName)+" / 統編："+(0,d.zw)(l.order?.user?.companyID),1)])):(0,a.kq)("",!0),"company"===l.order?.user?.identity?((0,a.wg)(),(0,a.iD)("tr",ye,[we,(0,a._)("td",null,(0,d.zw)(l.order?.user?.companyPhone),1)])):(0,a.kq)("",!0)])])]),Me])])],512)}var xe={props:{order:{}},methods:{openModal(){this.modal.show()},hideModal(e){this.modal.hide()}},mounted(){this.modal=new(I())(this.$refs.orderModal,{keyboard:!1,backdrop:!1})}};const Oe=(0,B.Z)(xe,[["render",ke]]);var Ce=Oe,De={components:{paginationPage:$.Z,deleteAllModal:D.Z,deleteOrderModal:X,orderModal:Ce},data(){return{orders:{},pagination:{},tempOrder:{}}},mounted(){this.getOrder()},methods:{getOrder(e=1){const t=`https://vue3-course-api.hexschool.io/v2/api/peiying/admin/orders?page=${e}`;this.$http.get(t).then((e=>{this.orders=e.data.orders,this.pagination=e.data.pagination,console.log(e),console.log("orders",this.orders)})).catch((e=>{console.dir(e)}))},openModal(e,t){if("delete"===t){this.tempOrder={...e};const t=this.$refs.deleteItOrderModal;t.openModal()}else if("edit"===t){this.tempOrder={...e};const t=this.$refs.orderModal;t.openModal()}},deleteAllModal(){const e=this.$refs.deleteOrderAllModal;e.openModal()},creatDate(e){const t=new Date(1e3*e),l=t.getFullYear(),a=t.getMonth()+1,d=t.getDate(),o=`${l} / ${a} / ${d}`;return o},creatTime(e){const t=new Date(1e3*e),l=t.getHours(),a=t.getMinutes(),d=t.getSeconds(),o=`${l} 點 ${a} 分 ${d} 秒`;return o}}};const $e=(0,B.Z)(De,[["render",C],["__scopeId","data-v-922f529e"]]);var ze=$e},26:function(e,t,l){e.exports=l.p+"img/OrderNone_undraw_autumn.d5c75f97.svg"}}]);
//# sourceMappingURL=567.2b1d16df.js.map